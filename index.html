<!doctype html>
<html>
<head>
	<meta charset=utf-8>
	<title>jQuery tutorials</title>
	<link rel="stylesheet" href="style.css">
	<style type="text/css">
		h2 span { 
			color: gray; 
			font-size: 0.8em;
		}
	</style>
</head>
<body>
	<ul class="tweets">
		<script type="text/x-handlebars-template" id="template">
			{{#each this}}
			<li>
			<h2>{{fullName author}} {{#if age}}- <span>{{age}}</span>{{/if}}</h2>
				<p>{{{tweet}}}</p>
				
				{{#if quote}}
					<h5>{{quote}}</h5>
				{{else}}
					<h5>author doesn't have quote</h5>
				{{/if}}
			</li>
			{{/each}}
		</script>
	</ul>
		

	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.js"></script>
	<script src="https://raw.github.com/wycats/handlebars.js/1.0.rc.2/dist/handlebars.js"></script>
	<script>
		(function() {
			
			// Three curly braces on tweet prevents html escaping
			var context = [
				{
					author: { first: 'Jeffrey', last: 'Way' },
					tweet: '30 days to learn jquery',
					age: 27,
					quote: 'hi'
				},
				{
					author: { first: 'Other', last: 'Guy' },
					tweet: '<strong>omg</strong>'
				}
			];

			Handlebars.registerHelper('fullName', function(author) {
				return author.first + ' ' + author.last;
			});

			var source = $('#template').html();
			var template = Handlebars.compile(source);

			$('ul.tweets').append(template(context));
		})();
	</script>
</body>
</html>
